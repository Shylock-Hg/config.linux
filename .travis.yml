language: minimal

sudo: required

services:
  - docker

before_install:
  - docker build -t shylockhg/dev docker/dev
  - docker build -t shylockhg/blog docker/jekyll

script:
  - docker run shylockhg/dev
  - docker run shylockhg/blog

#after_success:
#  - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
#  - docker push $DOCKER_USERNAME/$REPO

deploy:
  provider: script
  script: ./.travis-ci/deploy-docker.sh
  on:
    branch: master
  skip_cleanup: true
